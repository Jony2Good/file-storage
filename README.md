# file-storage
Реализация файлового хранилища в видео REST API на языке программирования PHP. Итоговая работа по обучению в компании "Skillbox".
1. Файловая структура проекта:
* app:
    - Controllers -> отвечает за взамиодействие с базой данных, реализуется основная логика приложения;
    - DataBase -> подключение к базе данных MySQL;
    - Router -> логика маршрутизации в проекте;
    - Services -> обслуживание классов в контроллерах (валидация, создание токенов, проверка и т.д.).
* config - содержит и секретную информацию по подключаемому ресурсу к проекту.
* public - входная точка в приложение, а также настройки сервера Apache.
* routes - содержит файл, в котором регистрируются отностительные URL.
* views - электронное письмо.

2. Для запуска проекта предполагается использование сторонних зависимостей, которе подключаются с помощью composer.json, а также импорт базы данных file_storage в PHPMyAdmin.

# 3. Как работает приложение.
# По умолчанию правами администратора обладает пользователь с почтой akk_12@mail.ru и паролем 123

3.1. РЕГИСТРАЦИЯ/АВТОРИЗАЦИЯ/АВТЕНТИФИКАЦИЯ: директория app/Controllers/Auth.php
* При регистрации пользователь отправляет в приложение данные (имя, логин, почта, пароль, проверка пароля). При успешном прохождении проверок данные пользователя записываются в таблице User.
* После прохождения регистрации пользователю необходимо войти в приложение. Вход осуществлялся по электронной почте и паролю. При этом пользователь получает токен, который возникает каждый раз, когда пользователь взамиоприменяется с приложением. Токен сохраняется в базе данных и проверяется каждый раз, когда пользователь взамиодействует с различными частями приложения.
* Пользователь может выйти из приложения. Выданный токен и сессия уничтожаются. Производятся изменения в базе данных.
* Реализована функция сброса пароля. И введение нового пароля с внесением соответствующих изменений в базе данных.

3.2.ПОЛУЧЕНИЕ ДАННЫХ О ПОЛЬЗОВАТЕЛЕ: директория app/Controllers/User.php
* В приложении реализована логика, доступ к которой имеет только пользователь с ролью «администратора».
  - Получение списка пользователей;
  - Получение конкретного пользователя;
  - Добавление пользователя;
  - Обновление пользовтаеля;
  - Удаление пользователя.
  
3.3.РАБОТА С ФАЙЛАМИ: директория app/Controllers/File.php
* В приложении реализована логика работы с файловой системой по схеме - структура каталогов и список файлов хранятся в базе данных. А в файловой системе ОС файлы пользователя сохраняются в директории public/uploads в зашифрованном виде. Работа с файлами осуществляется всеми пользователями приложения. Реализуются следующие операции с файлами и каталогами:
  - Создать директорию;
  - Получить директорию;
  - Переименовать директорию;
  - Удалить директорию;
* Важно! Файл можно сохрнаить только при наличии имени директории в запросе к API
  - Вы пользуетесь списками файлов и каталогов у нескольких пользователей.
Можно получить информацию о зараженных файлах.
Добавить файл. Реализовать указанный пункт можно, только при наличии в запросе директории ("папка: имя", "файл: имя"), в эту папку найден файл. Файл не может сохраняться без каталогов.
Переименовать или переместить файл.
Удалить файл.
Добавить директорию.
Переименовать директорию.
Получить информацию о папке.
Удалить папку. Справочно: при удалении всей папки, удаляются и все файлы, которые находятся в ней, из базы данных и из файлов хранилища ОС.
ФУНКЦИЯ ПОДЕЛИТЬСЯ ФАЙЛАМИ файл app/Controllers/File.php

Реализовать возможность приобретения администратора доступом к файлу с другими пользователями системы.

Получить список популярных пользователей доступ к файлу.
Добавить дотсуп к файлу вредоносного ПО.
Прекратить доступ к файлу.
Код проверен на различных анализаторах, в том числе Qodana.
